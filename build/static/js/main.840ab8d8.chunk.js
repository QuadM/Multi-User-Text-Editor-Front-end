(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){},28:function(e,t,n){e.exports=n.p+"static/media/Loading_icon.f4404720.gif"},29:function(e,t,n){e.exports=n.p+"static/media/stories-icon.d8b06b1a.svg"},30:function(e,t,n){e.exports=n.p+"static/media/Add.535808ca.svg"},31:function(e,t,n){e.exports=n.p+"static/media/Loading_icon.f4404720.gif"},32:function(e,t,n){e.exports=n(53)},41:function(e,t,n){},45:function(e,t,n){},50:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(25),l=n.n(o),i=(n(41),n(43),n(45),n(17)),r=n(0),u=n(3),s=n(26),d=n.n(s),f=n(16),m=(n(50),n(28)),b=n.n(m),g=!1,v=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(c.useState)(null),i=Object(u.a)(l,2),s=i[0],m=i[1],v=Object(c.useState)(null),p=Object(u.a)(v,2),E=p[0],h=p[1],O=Object(c.useState)(null),j=Object(u.a)(O,2),x=j[0],y=j[1],k=Object(c.useState)(0),w=Object(u.a)(k,2),C=w[0],S=w[1],q=Object(c.useState)(""),I=Object(u.a)(q,2),N=I[0],L=I[1],_=Object(r.g)().id,D=document.querySelector("html");Object(c.useEffect)(function(){D.scrollTop=0;var e=function(){var e=document.querySelector(".stky"),t=D.scrollTop/D.scrollHeight,n=t*(window.innerWidth+window.innerHeight)+"px";e.style.minWidth=n,e.style.backgroundColor="rgba(221,121,192,".concat(t+.5,")"),console.log("lol",D.style.backgroundColor,D.scrollTop,D.scrollHeight,n,e)};return window.addEventListener("scroll",e,{passive:!0}),function(){return window.removeEventListener("scroll",e)}},[D]);var F=function(){if(!g){g=!0,L("hidden");var e=setInterval(function(){var t={title:document.querySelector("#title").value,quillContents:s.getContents()};g=!1,E.emit("save-doc",t),x.emit("save-doc",t),console.log(t),L(""),clearInterval(e)},3e3)}};Object(c.useEffect)(function(){E&&E.on("client-number",function(e){S(e)})},[E]),Object(c.useEffect)(function(){x&&x.on("client-number",function(e){S(e)})},[x]);var R=Object(c.useCallback)(function(e){var t=document.createElement("div"),n=document.createElement("div");if(e){e.appendChild(n),document.querySelector("body").style.overflow="visible",document.querySelector("body").appendChild(t),t.style.position="fixed",t.className="stky",t.style.zIndex=3,t.style.top="0px",t.style.left="0px",t.style.height="5px";var c=new d.a(n,{theme:"snow"}),a=document.getElementsByClassName("ql-editor")[0],o=document.createElement("img");o.setAttribute("src",b.a),o.style="width:100%;",a.append(o),c.disable(),m(c)}},[]);Object(c.useEffect)(function(){if(null!==E&&null!==s){var e=function(e,t,n){"user"===n&&(E.emit("make-text-changes",{docID:_,quillContents:s.getContents(),delta:e}),x.emit("make-text-changes",{docID:_,quillContents:s.getContents(),delta:e}),F())};return s.on("text-change",e),function(){s.off("text-change",e)}}},[s,E,_]);var P;return Object(c.useEffect)(function(){if(s&&E)return E.on("receive-text-changes",function(e){s.updateContents(e)}),x.on("receive-text-changes",function(e){s.updateContents(e)}),function(){E.off("receive-text-changes"),x.off("receive-text-changes")}},[E,s]),Object(c.useEffect)(function(){if(E)return E.on("receive-title-changes",function(e){o(e),console.log("receive title changes delta :",e)}),x.on("receive-title-changes",function(e){o(e),console.log("receive title changes delta :",e)}),function(){E.off("receive-title-changes"),x.off("receive-title-changes")}},[E,n]),Object(c.useEffect)(function(){var e=Object(f.a)("https://quadm-text-editor-backend.herokuapp.com/");h(e);var t=Object(f.a)("https://quadm-text-editor-backend-1.herokuapp.com/");return y(t),function(){e.disconnect(),t.disconnect()}},[]),Object(c.useEffect)(function(){E&&s&&!C&&!P&&(!C&&E.once("load-doc",function(e){var t=e.doc,n=e.clientno;P=n,console.log(t),o(t.title),S(n),s.setContents(t.quillContents),s.enable()}),E.emit("get-doc",_))},[E,s,_,C]),Object(c.useEffect)(function(){setInterval(function(){x&&s&&!C&&!P&&(x.once("load-doc",function(e){var t=e.doc,n=e.clientno;P=n,console.log(t),o(t.title),S(n),s.setContents(t.quillContents),s.enable()}),x.emit("get-doc",_))},2e3)},[x,s,_,C]),a.a.createElement("div",{style:{overflow:"visible"}},a.a.createElement("span",{style:{color:"white",backgroundColor:"rgba(100,100,255,0.8)",padding:"1px 0.5em 4px",borderRadius:"20px",float:"left",position:"sticky",top:"20px"},className:N},"Saved"),a.a.createElement("span",{style:{position:"sticky",float:"right",color:"white",backgroundColor:"rgba(255,100,100,0.8)",padding:"1px 0.5em 4px",borderRadius:"20px",top:"20px"}},C," Online"),a.a.createElement("input",{type:"text",className:"title",value:n,id:"title",onChange:function(e){var t;t=e.target.value,console.log("handle title change val :",t),E.emit("make-title-changes",t),x.emit("make-title-changes",t),F(),o(e.target.value)}}),a.a.createElement("div",{ref:R}))},p=(n(24),function(e){var t=Object(c.useState)("0px"),n=Object(u.a)(t,2),a=n[0],o=n[1],l=Object(c.useState)("0px"),i=Object(u.a)(l,2),r=i[0],s=i[1],d=Object(c.useState)(!1),f=Object(u.a)(d,2),m=f[0],b=f[1],g=Object(c.useCallback)(function(t){e&&e.current.contains(t.target)?(t.preventDefault(),o("".concat(t.pageX,"px")),s("".concat(t.pageY,"px")),b(!0)):b(!1)},[b,e,o,s]),v=Object(c.useCallback)(function(){b(!1)},[b]);return Object(c.useEffect)(function(){return document.addEventListener("click",v),document.addEventListener("contextmenu",g),function(){document.removeEventListener("click",v),document.removeEventListener("contextmenu",g)}},[v,g]),{xPos:a,yPos:r,menu:m}}),E=function(e){var t=e.outerRef,n=e.handleDelete,c=(e.handleRename,p(t)),o=c.xPos,l=c.yPos;return c.menu?a.a.createElement("div",{className:"contextMenu contextMenuItemRed",style:{top:l,left:o}},a.a.createElement("div",{className:"contextMenuItem ",onClick:function(){return n()}},"Delete")):a.a.createElement(a.a.Fragment,null)},h=n(29),O=n.n(h),j=function(e){var t=e.file,n=e.handleDelete,o=(e.handleRename,"/document/".concat(t._id)),l=Object(c.useRef)(null);return a.a.createElement("div",{ref:l},a.a.createElement("a",{className:"fileContainer filebox",href:o},a.a.createElement("div",{className:"fileimg"},a.a.createElement("img",{src:O.a,alt:"fileimg"})),a.a.createElement("p",null,t.title.length>10?t.title.slice(0,10)+"...":t.title)),a.a.createElement(E,{outerRef:l,style:{zIndex:1},handleDelete:n}))},x=n(30),y=n.n(x),k=function(){return a.a.createElement("div",{className:"fileContainer filebox",style:{cursor:"pointer"}},a.a.createElement("div",{className:"fileimg"},a.a.createElement("img",{src:y.a,alt:"fileimg"})),a.a.createElement("p",null,"New File"))},w=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(c.useState)(),r=Object(u.a)(l,2),s=r[0],d=r[1],m=Object(c.useState)(),b=Object(u.a)(m,2),g=b[0],v=b[1];return Object(c.useEffect)(function(){var e=Object(f.a)("https://quadm-text-editor-backend.herokuapp.com/"),t=Object(f.a)("https://quadm-text-editor-backend-1.herokuapp.com/");d(e),v(t),e.emit("get-all-docs"),t.emit("get-all-docs")},[]),Object(c.useEffect)(function(){var e;s&&s.on("recieve-all-docs",function(t){console.log("here in active"),e=!0,console.log(t),o(t)}),e||g&&g.on("recieve-all-docs",function(t){console.log(t),console.log("here in pasive"),o(t),e=t})},[s,n,g]),Object(c.useEffect)(function(){n||(s&&s.emit("get-all-docs"),g&&g.emit("get-all-docs"))},[n,s,g]),a.a.createElement("div",{className:"fileSystem"},a.a.createElement(a.a.Fragment,null,n&&n.map(function(e){return a.a.createElement(j,{file:e,key:e._id,handleDelete:function(){return t=e,void(window.confirm("Are you sure to delete ".concat(t.title," document?"))&&(console.log("successfully deleted document, id: ",t._id),o(n.filter(function(e){return e._id!==t._id})),s.emit("delete-doc",t._id)));var t}})}),a.a.createElement(i.b,{to:"/document/new"},a.a.createElement(k,null))))},C=n(31),S=n.n(C),q=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(c.useState)(),i=Object(u.a)(l,2),s=i[0],d=i[1],m=Object(c.useState)(),b=Object(u.a)(m,2),g=b[0],v=b[1],p=Object(c.useState)(),E=Object(u.a)(p,2),h=E[0],O=E[1],j=Object(r.f)();return Object(c.useEffect)(function(){var e=Object(f.a)("https://quadm-text-editor-backend.herokuapp.com/");d(e);var t=Object(f.a)("https://quadm-text-editor-backend-1.herokuapp.com/");v(t),e&&e.on("created-new-doc",function(e){O("/document/"+e._id)}),t&&t.on("created-new-doc",function(e){O("/document/"+e._id)})},[]),Object(c.useEffect)(function(){s&&s.emit("create-new-doc");var e=setInterval(function(){o(!0),console.log("interval 5ls w flag b :",n),clearInterval(e)},5e3)},[s]),Object(c.useEffect)(function(){return h&&j(h,{replace:!0})},[h]),Object(c.useEffect)(function(){console.log("interval 5ls w flag b :",n),n&&g.emit("create-new-doc")},[n,g]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{background:"white",padding:"2em",margin:"auto"}},a.a.createElement("h1",null," Creating File "),a.a.createElement("img",{src:S.a,alt:"loading img"})))};var I=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(i.a,null,a.a.createElement(r.c,null,a.a.createElement(r.a,{path:"/",element:a.a.createElement(w,null)}),a.a.createElement(r.a,{path:"/document/new",element:a.a.createElement(q,null),exact:!0}),a.a.createElement(r.a,{path:"/document/:id",element:a.a.createElement(v,null)}))))},N=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,54)).then(function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),o(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(I,null))),N()}},[[32,3,2]]]);
//# sourceMappingURL=main.840ab8d8.chunk.js.map